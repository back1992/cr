

/*===============================
http://localhost/bt_education30/templates/bt_education/html/mod_bt_backgroundslideshow/js/default.js
================================================================================*/;
var activeContainer=1;var currentContainer=1;var interval=0;var caption='';var animating=false;var seekReady=false;var ready=false;var playheadInterval=0;var player=new Array();$B=jQuery.noConflict();$B(document).ready(function(){$B(bsData.wrapperElement).each(function(){$B(this).find('script').remove();$B(this).wrapInner('<div class="wrapp-inner"></div>');$B(this).append($B('#html-control').html());$B('#html-control').remove();$B('#cp-bg-navigation').show();return false;});if(bsData.slideshowSize=="window"){$B('#cp-bg-slide').css('position','fixed');}
else{$B('#cp-bg-slide').css('position','absolute');$B(window).bind('load',function(){resizeBackground(activeContainer);});}
if(bsData.slideshowSize=="window"&&bsData.wrapperElement=="body"){$B('#cp-bg-bar').css('position','fixed');}
else{$B('#cp-bg-bar').css('position',bsData.navPosition);}
$B('#cp-caption-inner').css('position',bsData.navPosition);if(bsData.slideshowSize=="wrapper"){$B(bsData.wrapperElement).css('position','relative');}
$B("#cp-bg-slide").append('<div class="loading"></div>');if(bsData.navType=='nav-thumb'){$B.each(bsData.photos,function(){var img=new Image();img.src=this.image.replace('/original/','/thumbnail/').replace('/slideshow/','/thumbnail/');})}else if(bsData.navType=='nav-btn'){var img=new Image();var pathway=bsData.url+'/modules/mod_bt_backgroundslideshow/tmpl/images/';img.src=pathway+'play.png';img.src=pathway+'pause.png';img.src=pathway+'next.png';img.src=pathway+'back.png';}
var total=bsData.photos.length;var u=0;$B.each(bsData.photos,function(){var img=new Image();$B(img).load(function(){bsData.photos[u].height=img.height;bsData.photos[u].width=img.width;++u;if(u==total){$B("#cp-bg-slide").find('.loading').fadeOut('fast',function(){$B(this).remove()});initSlideShow();}}).error(function(){}).attr('src',this.image);})});var navigate;function initSlideShow(){$B(window).bind('resize',function(){resizeBackground(activeContainer);});$B(bsData.wrapperElement).css('background','none');$B("#cp-back").click(function(){stopAnimation($B('#cp-pause').is(':visible'));navigate("back");var showhidevideo=parseInt($B('#cp-bg-bar .progress-button').attr('class').replace('progress-button',''));var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');eventCpNextBackSlide(showhidevideo,autoplay);});$B("#cp-next").click(function(){stopAnimation($B('#cp-pause').is(':visible'));navigate("next");var showhidevideo=parseInt($B('#cp-bg-bar .progress-button').attr('class').replace('progress-button',''));var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');eventCpNextBackSlide(showhidevideo,autoplay);});$B("#cp-pause").click(function(){stopAnimation(false);$B('#cp-pause').hide();$B('#cp-play').show();});$B("#cp-play").click(function(){stopAnimation(true);$B("#progress-background").show();$B('#cp-play').hide();$B('#cp-pause').show();});var first=true;navigate=function(direction){currentContainer=activeContainer;if(!first){if(direction=="next"){if(activeContainer==bsData.photos.length){activeContainer=1;}else if(activeContainer<=bsData.photos.length){activeContainer+=1;}}else{if(activeContainer==1){activeContainer=bsData.photos.length;}else if(activeContainer<=bsData.photos.length){activeContainer-=1;}}}
showImage(currentContainer,activeContainer);$B('#cp-video'+activeContainer).click(function(){showvideo(activeContainer);replayVideo(activeContainer);});if($B('#cp-video'+activeContainer).is(':hidden')){var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');if(autoplay==1){stopAnimation(false);$B('#cp-play').show();$B('#cp-pause').hide();$B("#progress-background").hide();setTimeout('replayVideo(activeContainer)',bsData.effectTime);}else{if(bsData.autoPlay==1){$B("#progress-background").show();stopAnimation(true);};}
if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);}}
else{if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);}
if(bsData.autoPlay==1){$B("#progress-background").show();stopAnimation(true);$B('#cp-play').hide();$B('#cp-pause').show();}else{$B("#progress-background").show();}}};var showImage=function(currentContainer,activeContainer){var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');var controlvideo=$B('.fr-video').attr('rel');var autohidebar=$B("#ytplayer").attr('rel');if(!first){var shvideo=$B("#slideimgs").attr('rel');var effecslide=$B("#slideimg"+currentContainer).attr('rel');var ssSize=getSlideShowSize();var slidewidth=ssSize.width;var slideheight=ssSize.height;if(effecslide!=''){switch(effecslide){case'top':if(activeContainer>currentContainer){slideanimate('top',slidewidth,slideheight);}
else{slideanimate('bottom',slidewidth,slideheight);}
break;case'bottom':if(activeContainer>currentContainer){slideanimate('bottom',slidewidth,slideheight);}
else{slideanimate('top',slidewidth,slideheight);}
break;case'left':if(activeContainer>currentContainer){slideanimate('left',slidewidth,slideheight);}
else{slideanimate('right',slidewidth,slideheight);}
break;case'right':if(activeContainer>currentContainer){slideanimate('right',slidewidth,slideheight);}
else{slideanimate('left',slidewidth,slideheight);}
break;default:break;}}
else{$B("#slideimg"+currentContainer).fadeOut(bsData.effectTime);$B("#slideimg"+activeContainer).fadeIn(bsData.effectTime,function(){if(shvideo==0){hidevideo(currentContainer);}else{if($B('#cp-video'+activeContainer).is(':hidden')){showyoubarvideo(activeContainer);if(controlvideo==0){if(autohidebar!=2){$B('#cp-bg-navigation').addClass('spaceimage');$B('.progress-button').addClass('spacebarimage');}}}}});}}else{activeContainer=currentContainer;$B("#slideimg"+activeContainer).show();first=false;}
hidebarvideo();var shvideo=$B("#slideimgs").attr('rel');var itemhover=bsData.wrapperElement;;if(shvideo==1){if($B('#cp-video'+activeContainer).is(':hidden')){if(autoplay==1){stopAnimation(false);$B('#cp-play').show();$B('#cp-pause').hide();$B("#progress-background").hide();bindhover();}}
else{var youid=$B("#player"+activeContainer).attr("rel");if(youid){$B('#cp-video'+activeContainer).hide();if(activeContainer==1){if(controlvideo==0){if(autohidebar!=2){$B('#cp-bg-navigation').addClass('spaceimage');$B('.progress-button').addClass('spacebarimage');}}
showyoubarvideo(activeContainer);}
clickvideo(activeContainer);bindhover();}
else{$B(".fr-video").unbind('mouseenter').unbind('mouseleave');$B(''+itemhover+'').unbind('mouseenter').unbind('mouseleave');$B('body').unbind('mouseenter').unbind('mouseleave');}}}else{$B(''+itemhover+'').unbind('mouseenter').unbind('mouseleave');$B('body').unbind('mouseenter').unbind('mouseleave');$B('#cp-bg-navigation').removeClass('spaceimage');$B('.progress-button').removeClass('spacebarimage');$B('#cp-video'+activeContainer).show();if(bsData.autoPlay==1){$B("#progress-background").show();stopAnimation(true);};}
resizeBackground(activeContainer);changeCaption(activeContainer-1);};navigate("next");if(bsData.photos.length>1){if(bsData.autoPlay){if($B('#cp-video'+activeContainer).is(':hidden')){$B("#slideimg"+activeContainer+" img").hide();var autoplayvideo=$B("#play-pause-btn"+activeContainer).attr('rel');if(autoplayvideo==1){stopAnimation(false);}
else{stopAnimation(true);}}
$B('#cp-pause').show();$B('#cp-play').hide();}else{if($B('#cp-video'+activeContainer).is(':hidden')){$B("#slideimg"+activeContainer+" img").hide();}
$B('#cp-pause').hide();$B('#cp-play').show();}
$B('#cp-bg-bar').show();}else{if($B('#cp-video'+activeContainer).is(':hidden')){$B("#slideimg"+activeContainer+" img").hide();}
$B('.progress-button').hide();stopAnimation(false);$B('#cp-bg-bar').show();}
if(bsData.navType=='nav-thumb'){bsData.thumbNumber_store=bsData.thumbNumber;var widthThumb=$B('#thumbimgs .thumbimg').outerWidth(true);var heightThumb=$B('#thumbimgs .thumbimg').outerHeight(true);var length=$B('#thumbimgs .thumbimg').length;var distance=widthThumb*bsData.thumbNumber_store+2*$B('#nav-back').outerWidth(true)+20-$B("#cp-bg-navigation").parent().width();if(distance>0){bsData.thumbNumber=bsData.thumbNumber_store-Math.ceil(distance/widthThumb);}
$B('#thumbimgs').width(widthThumb*bsData.thumbNumber);$B('#thumbimgs-inner').width(widthThumb*length);$B('#thumbimgs').height(heightThumb);$B('.nav-btn').css('marginTop',(heightThumb-$B('.nav-btn').height())/2);$B("#nav-back").click(function(){if(animating)return;animating=true;if(parseInt($B('#thumbimgs-inner').css('left'))<0){$B('#thumbimgs-inner').stop();if(parseInt($B('#thumbimgs-inner').css('left'))+widthThumb<=0){$B('#thumbimgs-inner').animate({left:'+='+widthThumb},function(){animating=false;});}else{$B('#thumbimgs-inner').animate({left:0},function(){animating=false;});}}
else{$B('#thumbimgs-inner').animate({left:-1*widthThumb*(length-bsData.thumbNumber)},function(){animating=false;});}});$B("#nav-next").click(function(){if(animating)return;animating=true;if(Math.abs(parseInt($B('#thumbimgs-inner').css('left')))<widthThumb*(length-bsData.thumbNumber)){$B('#thumbimgs-inner').stop();if(Math.abs(parseInt($B('#thumbimgs-inner').css('left')))<widthThumb*(length-bsData.thumbNumber)){$B('#thumbimgs-inner').animate({left:'-='+widthThumb},function(){animating=false;});}else{$B('#thumbimgs-inner').animate({left:-1*widthThumb*(length-bsData.thumbNumber)},function(){animating=false;});}}else{$B('#thumbimgs-inner').animate({left:0},function(){animating=false;});}});$B(window).resize(function(){var distance=widthThumb*bsData.thumbNumber_store+2*$B('#nav-back').outerWidth(true)+20-$B("#cp-bg-navigation").parent().width();if(distance>0){bsData.thumbNumber=bsData.thumbNumber_store-Math.ceil(distance/widthThumb);$B('#thumbimgs').width(widthThumb*bsData.thumbNumber);}else{bsData.thumbNumber=bsData.thumbNumber_store;$B('#thumbimgs').width(widthThumb*bsData.thumbNumber);}});}
$B('#thumbimgs .thumbimg,#cp-bullet span').click(function(){if(!$B(this).hasClass('active')){stopAnimation(!bsData.stopAuto);currentContainer=activeContainer;activeContainer=parseInt($B(this).attr('id').replace('thumbimg','').replace('bullet',''));showImage(currentContainer,activeContainer);}
var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');var showhidevideo=$B("#slideimgs").attr('rel');eventThumbNextBackSlide(showhidevideo,autoplay);$B('#cp-video'+activeContainer).click(function(){showvideo(activeContainer);replayVideo(activeContainer);});});var showvideo=(function(activeContainer){$B("#slideimg"+activeContainer+' .fr-video').show('easing');showyoubarvideo(activeContainer);$B("#progress-background").hide();$B('#cp-video'+activeContainer).hide();$B('#cp-play').show();$B('#cp-pause').hide();var controlvideo=$B('.fr-video').attr('rel');var autohidebar=$B("#ytplayer").attr('rel');if(controlvideo==0){if(autohidebar!=2){$B('#cp-bg-navigation').addClass('spaceimage');$B('.progress-button').addClass('spacebarimage');}}
stopAnimation(false);clickvideo(activeContainer);});var hidevideo=(function(activeContainer){$B("#slideimg"+activeContainer+' .fr-video').hide();});controlPosition();}
var eventCpNextBackSlide=(function(showhidevideo,autoplay){if(showhidevideo==0){$B(".fr-video").unbind('mouseenter').unbind('mouseleave');if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);}}
else{if($B('#cp-video'+activeContainer).is(':hidden')){if(autoplay==1){stopAnimation(false);$B('#cp-play').show();$B('#cp-pause').hide();setTimeout('replayVideo(activeContainer)',1200);}
else{if(bsData.autoPlay==1){$B("#progress-background").show();stopAnimation(true);$B('#cp-play').hide();$B('#cp-pause').show();}}
if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);setStateVideo('paused',currentContainer);}}
else{$B(".fr-video").unbind('mouseenter').unbind('mouseleave');if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);setStateVideo('paused',currentContainer);}
if(bsData.autoPlay==1){$B("#progress-background").show();stopAnimation(true);$B('#cp-play').hide();$B('#cp-pause').show();}else{$B("#progress-background").show();}}}});var eventThumbNextBackSlide=(function(showhidevideo,autoplay){if(showhidevideo==0){if(!$B('#cp-video'+activeContainer).is(':hidden')){$B("#progress-background").show();if($B('#cp-video'+currentContainer).is(':hidden')){pauseVideo(currentContainer);}}
$B(".fr-video").unbind('mouseenter').unbind('mouseleave');}
else{if($B('#cp-video'+activeContainer).is(':hidden')){bindhover();var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');if(autoplay==1){stopAnimation(false);$B("#progress-background").hide();setTimeout('replayVideo(activeContainer)',1200);}else{if(bsData.autoPlay==1){if(currentContainer!=activeContainer){stopAnimation(true);$B("#progress-background").show();}}}
if($B('#cp-video'+currentContainer).is(':hidden')&&currentContainer!=activeContainer){pauseVideo(currentContainer);setStateVideo('paused',currentContainer);}}
else{if($B('#cp-video'+currentContainer).is(':hidden')&&currentContainer!=activeContainer){pauseVideo(currentContainer);setStateVideo('paused',currentContainer);}
$B("#cp-bg-bar").animate({opacity:"1",bottom:'0px'},20);$B(".fr-video").unbind('mouseenter').unbind('mouseleave');$B('#cp-bg-navigation').removeClass('spaceimage');if(bsData.autoPlay==1){if(currentContainer!=activeContainer){$B("#progress-background").show();stopAnimation(true);}}else{$B("#progress-background").show();}}}});var stopAnimation=function(reset){progressBarReset();clearInterval(interval);if(reset){progressBar();interval=setInterval(function(){navigate("next");progressBar();},bsData.slideshowSpeed);}};var slideanimate=(function(navigate,slidewidth,slideheight){var shvideo=$B("#slideimgs").attr('rel');var controlvideo=$B('.fr-video').attr('rel');var autohidebar=$B("#ytplayer").attr('rel');switch(navigate){case'top':$B("#slideimg"+activeContainer).css({top:'-'+slideheight+'px'});$B("#slideimg"+currentContainer).stop(true).animate({opacity:1,top:slidewidth+'px'},1000);$B("#slideimg"+activeContainer).show().stop(true).animate({opacity:1,top:'0px'},1000,function(){showhidebarvideo(shvideo,controlvideo,autohidebar);});return;case'bottom':$B("#slideimg"+activeContainer).css({top:slideheight+'px'});$B("#slideimg"+currentContainer).stop(true).animate({opacity:1,top:'-'+slidewidth+'px'},1000);$B("#slideimg"+activeContainer).show().stop(true).animate({opacity:1,top:'0px'},1000,function(){showhidebarvideo(shvideo,controlvideo,autohidebar);});return;case'left':$B("#slideimg"+activeContainer).css({left:'-'+slidewidth+'px'});$B("#slideimg"+currentContainer).stop(true).animate({opacity:1,left:slidewidth+'px'},1000);$B("#slideimg"+activeContainer).show().stop(true).animate({opacity:1,left:'0px'},1000,function(){showhidebarvideo(shvideo,controlvideo,autohidebar);});return;case'right':$B("#slideimg"+activeContainer).css({left:slidewidth+'px'});$B("#slideimg"+currentContainer).stop(true).animate({opacity:1,left:'-'+slidewidth+'px'},1000);$B("#slideimg"+activeContainer).show().stop(true).animate({opacity:1,left:'0px'},1000,function(){showhidebarvideo(shvideo,controlvideo,autohidebar);});return;}});var showhidebarvideo=(function(shvideo,controlvideo,autohidebar){if(shvideo==0){$B("#slideimg"+currentContainer+' .fr-video').hide();}else{if($B('#cp-video'+activeContainer).is(':hidden')){showyoubarvideo(activeContainer);if(controlvideo==0){if(autohidebar!=2){$B('#cp-bg-navigation').addClass('spaceimage');$B('.progress-button').addClass('spacebarimage');}}}}
$B('.slideimg[id!="slideimg'+activeContainer+'"]').hide();});function onYouTubeIframeAPIReady(){$B('.fr-video').each(function(){$player=$B('.player',this);var ytid=$player.attr('rel');var id=$player.attr('id').replace('player','');var controlvideo=$B('.fr-video').attr('rel');var autohidebar=$B("#ytplayer").attr('rel');if(autohidebar==2)controlvideo=0;player[id]=new YT.Player('player'+id,{height:'100%',width:'100%',videoId:ytid,playerVars:{'html5':1,'rel':0,'controls':controlvideo,'autoplay':0,'hd':1,'autohide':autohidebar,'wmode':'opaque','showinfo':0},events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange}});});}
var clickvideo=(function(activeContainer){$B('#play-pause-btn'+activeContainer).click(function(){$B("#progress-background").hide();stopAnimation(false);if(!ready)return;playPause(activeContainer);});$B('#seekbar'+activeContainer).click(function(e){if(!seekReady)return;else{var navposition=bsData.navPosition;if(navposition=="absolute"){if(bsData.slideshowSize=="specific"){wSize=bsData.slideshowWidth;}else{var itemhover=bsData.wrapperElement;wSize=$B(''+itemhover+'').width();}}
else{wSize=$B(window).width();}
var localX=(e.pageX-$B(this).offset().left);if(localX>(wSize-81))localX=(wSize-81);var percent=localX/(wSize-81);seekToPercent(percent);}});$B('#mute-btn'+activeContainer).click(function(){if(!ready)return;toggleSound();});bindhover();});var i=null;var bindhover=(function(){if($B('.fr-video').attr('rel')==1)return;$B('.fr-video').bind({mouseenter:function(){clearTimeout(i);$B("#cp-bg-bar").stop(true).animate({opacity:"1",bottom:'0px'},500);},mouseleave:function(){var heightthumb=(bsData.thumbHeight+40);clearTimeout(i);i=setTimeout('$B("#cp-bg-bar").stop(true).animate({opacity: "1",bottom :"0px"}, 1000);',500);}});$B("#cp-bg-bar").bind({mouseenter:function(){clearTimeout(i);$B("#cp-bg-bar").stop(true).animate({opacity:"1",bottom:'0px'},800);}});});var hidebarvideo=(function(){$B("#ytplayer").hide();$B(".play-rel").hide();$B(".seekbarscroll").hide();$B(".mute-btn").hide();$B('.progress-button').removeClass('spacebarimage');$B('#cp-bg-navigation').removeClass('spaceimage');});var showyoubarvideo=(function(activeContainer){var controlvideo=$B('.fr-video').attr('rel');var autohidebar=$B("#ytplayer").attr('rel');if(controlvideo==0){if(autohidebar!=2){$B("#play-pause-btn"+activeContainer).fadeIn('slow');$B("#seekbar"+activeContainer).fadeIn('slow');$B("#mute-btn"+activeContainer).fadeIn('slow');$B("#ytplayer").fadeIn('slow');}}
var navposition;if(bsData.slideshowSize=="window"&&bsData.wrapperElement=="body"){navposition='fixed';}else{navposition=bsData.navPosition;}
var itemhover=bsData.wrapperElement;if(itemhover!='body'){$B(''+itemhover+'').css({'overflow':'hidden'});}
if(autohidebar==1){if($B('.fr-video').attr('rel')==1)return;if(navposition=='absolute'){if(itemhover!='body'&&itemhover!=""){eventMouse(''+itemhover+'');}
else{eventMouse('body');}}
else{eventMouse('body');}}});var eventMouse=(function(event){$B(event).bind({mouseenter:function(){clearTimeout(i);$B("#cp-bg-bar").stop(true).animate({opacity:"1",bottom:'0px'},500);},mousemove:function(p){clearTimeout(i);$B("#cp-bg-bar").stop(true).animate({opacity:"1",bottom:'0px'},500);},mouseleave:function(){var heightthumb=(bsData.thumbHeight+40);clearTimeout(i);$B("#cp-bg-bar").stop(true).animate({opacity:"1",bottom:'-'+heightthumb+'px'},1000);}});});function onPlayerReady(event){if($B('#cp-video'+activeContainer).is(':hidden')){var autoplay=$B("#play-pause-btn"+activeContainer).attr('rel');if(autoplay==1){replayVideo(activeContainer);}}
ready=true;}
var done=false;var i=0;function onPlayerStateChange(event){switch(event.data){case-1:return;case 0:resetPlayer();if(bsData.autoPlay==1){if(bsData.photos.length>1){$B("#progress-background").show();clearTimeout(i);i=setTimeout(function(){navigate("next");},500);stopAnimation(true);}
else{replayVideo(activeContainer);}}
return;case 1:$B("#progress-background").hide();stopAnimation(false);$B('#cp-play').show();$B('#cp-pause').hide();seekReady=true;playheadInterval=setInterval(updatePlayhead,10);setStateVideo('playing',activeContainer);return;case 2:setStateVideo('paused',activeContainer);return;case 3:setStateVideo('buffering',activeContainer);return;case 5:resetPlayer();ready=true;return;}}
var setStateVideo=(function(state,activeContainer){switch(state){case'playing':$B('#play-pause-btn'+activeContainer).removeClass('btn-paused');$B('#play-pause-btn'+activeContainer).removeClass('btn-buffering');$B('#play-pause-btn'+activeContainer).addClass('btn-playing');return;case'paused':$B('#play-pause-btn'+activeContainer).removeClass('btn-playing');$B('#play-pause-btn'+activeContainer).removeClass('btn-buffering');$B('#play-pause-btn'+activeContainer).addClass('btn-paused');return;case'buffering':$B('#play-pause-btn'+activeContainer).removeClass('btn-playing');$B('#play-pause-btn'+activeContainer).removeClass('btn-paused');$B('#play-pause-btn'+activeContainer).addClass('btn-buffering');return;default:return;}});var updatePlayhead=function(){if(player[activeContainer]){if(typeof(player[activeContainer].getCurrentTime)=='undefined'){clearInterval(playheadInterval);return;}
var navposition=bsData.navPosition;if(navposition=="absolute"){if(bsData.slideshowSize=="specific"){wSize=bsData.slideshowWidth;}else{var itemhover=bsData.wrapperElement;wSize=$B(''+itemhover+'').width();}}else{wSize=$B(window).width();}
var percentage=player[activeContainer].getCurrentTime()/player[activeContainer].getDuration();$B('#seekbar'+activeContainer).css('background-position',Math.round(percentage*(wSize-81))+'px 0px');}}
var resetPlayer=function(){$B('#play-pause-btn'+activeContainer).removeClass('btn-playing')
$B('#play-pause-btn'+activeContainer).removeClass('btn-buffering')
$B('#play-pause-btn'+activeContainer).addClass('btn-paused');$B('#seekbar'+activeContainer).css('background-position','0px 0px');}
var seekToPercent=function(percent){var time=percent*player[activeContainer].getDuration();player[activeContainer].seekTo(time,true);}
var toggleSound=function(){if(player[activeContainer].isMuted()){player[activeContainer].unMute();$B('#mute-btn'+activeContainer).css('background-position','0px 0px');}else{player[activeContainer].mute();$B('#mute-btn'+activeContainer).css('background-position','0px -40px');}}
function pauseVideo(activeContainer){if(typeof(player[activeContainer])!="undefined"){if(typeof(player[activeContainer].pauseVideo)=='function'){player[activeContainer].pauseVideo();}}}
function replayVideo(activeContainer){if(typeof(player[activeContainer])!="undefined"){if(typeof(player[activeContainer].playVideo)=='function'){player[activeContainer].playVideo();var volume=$B("#mute-btn"+activeContainer).attr('rel');var quality=$B("#seekbar"+activeContainer).attr('rel');player[activeContainer].setVolume(volume);player[activeContainer].setPlaybackQuality(quality);}}}
var playPause=function(activeContainer){var index=activeContainer;switch(player[index].getPlayerState()){case-1:case 0:case 2:case 5:player[index].playVideo();return;case 1:player[index].pauseVideo();return;case 3:player[index].pauseVideo();return;default:return;}}
function changeCaption(index){var photoObj=bsData.photos[index];$B('#cp-caption').fadeOut(function(){if(!photoObj.desc&&!photoObj.title){$B("#cp-caption").hide();return;}else{}
if($B("#cp-caption .cp-link").length&&photoObj.link!=''){$B("#cp-caption .cp-link").html(photoObj.title);$B("#cp-caption .cp-link").attr('href',photoObj.link);$B("#cp-caption .cp-link").attr('target',photoObj.target);}else{$B("#cp-caption .cp-title").html(photoObj.title);}
if(photoObj.desc){$B("#cp-caption .cp-desc").show();$B("#cp-caption .cp-desc").html(photoObj.desc);}else{$B("#cp-caption .cp-desc").hide();}
$B("#cp-caption").fadeIn(bsData.effectTime);});if(bsData.navType=='nav-thumb'){index++;$B('#thumbimgs .thumbimg').removeClass('active');$B('#thumbimg'+index).addClass('active');var width=$B('#thumbimgs .active').outerWidth(true);var left=$B('#thumbimgs .active').position().left+$B('#thumbimgs .active').outerWidth(true);var step=Math.round(($B('#thumbimgs .active').position().left+$B('#thumbimgs-inner').position().left)/width);if(step>=bsData.thumbNumber){move=width*(step-bsData.thumbNumber+1);$B('#thumbimgs-inner').animate({left:'-='+move});}
if(step<0){move=-1*width*step;$B('#thumbimgs-inner').animate({left:'+='+move});}}else if(bsData.navType=='nav-bullet'){index++;$B('#cp-bullet span').removeClass('active');$B('#bullet'+index).addClass('active');}}
function resizeBackground(index){var el="#slideimg"+index+' img';var ssSize=getSlideShowSize();wSize=ssSize.width+'px';wHeight=ssSize.height+'px';var hAlign=false;var vAlign=true;var img=bsData.photos[index-1];if($B(el).length){switch(bsData.resizeImage){case'fitwidth':$B("#slideimgs img").css({'width':wSize,'height':'auto'});break;case'fitheight':$B("#slideimgs img").css({'width':'auto','height':wHeight});hAlign=true;vAlign=false;break;case'stretch':$B("#slideimgs img").css({'width':wSize,'height':wHeight});vAlign=false;break;case'auto':if(ssSize.width*parseInt(img.height)/parseInt(img.width)<ssSize.height){$B(el).css({'width':'auto','height':wHeight});hAlign=true;vAlign=false;}else{$B(el).css({'width':wSize,'height':'auto'});}
break;default:hAlign=true;}}
if(bsData.slideshowSize!="window"&&bsData.navPosition=='absolute'){var shvideo=$B("#slideimgs").attr('rel');if(shvideo==1){$B('#cp-bg-bar').css({'bottom':'0px'});}else{$B('#cp-bg-bar').css({'top':ssSize.height-$B('#cp-bg-bar').height()});}}
$B('#cp-bg-slide').css({'width':wSize,'height':wHeight});$B(el).css('position','absolute');if(hAlign){switch(bsData.hAlign){case'l':$B(el).css('left',0);break;case'r':$B(el).css({'left':'auto','right':0});break;case'c':$B(el).css('left',((ssSize.width-$B(el).width())/2));break;}}else{$B(el).css('left',0);}
if(vAlign){switch(bsData.vAlign){case't':$B(el).css('top',0);break;case'b':$B(el).css({'top':'auto','bottom':0});break;case'm':$B(el).css('top',((ssSize.height-$B(el).height())/2));break;}}else{$B("#slideimg"+index).css('top',0);}
controlPosition();}
function progressBar(){var ssSize=bsData.navPosition=='fixed'?{width:$B(window).width(),height:$B(window).height()}:getSlideShowSize();$B('#progress-bar,progress-background').width(ssSize.width+'px');$B('#progress-bar').stop().animate({left:-ssSize.width},0).animate({left:0},bsData.slideshowSpeed);}
function progressBarReset(){var ssSize=bsData.navPosition=='fixed'?{width:$B(window).width(),height:$B(window).height()}:getSlideShowSize();$B('#progress-bar').stop().css('left',-ssSize.width);}
function preloadImage(photos){}
function controlPosition(){var ssSize=bsData.navPosition=='fixed'?{width:$B(window).width(),height:$B(window).height()}:getSlideShowSize();var el='';if(bsData.navType=='nav-btn'){el='.progress-button';}
else{$B('.progress-button').addClass('button-justify');$B('#cp-back,#cp-next,#cp-pause,#cp-play').css({'top':-1*(ssSize.height+$B('#cp-back').height())/2});if(bsData.navType=='nav-thumb'){el='#cp-bg-navigation';}else{return;}}
if(bsData.navAlign=='left'){$B(el).css({'float':bsData.navAlign});}else if(bsData.navAlign=='right'){$B(el).css({'float':bsData.navAlign,'right':0});}else if(bsData.navAlign=='center'){$B(el).css('left',(ssSize.width-$B(el).width())/2);}else if(bsData.navAlign=='justify'){$B('.progress-button').addClass('button-justify');$B('#cp-bg-bar').height(0);$B('#cp-back,#cp-next,#cp-pause,#cp-play').css({'top':-1*(ssSize.height+$B('#cp-back').height())/2});}}
function getSlideShowSize(){switch(bsData.slideshowSize){case'document':return{width:$B(document).width(),height:$B(document).height()};case'wrapper':return{width:$B(bsData.wrapperElement).innerWidth(),height:$B(bsData.wrapperElement).innerHeight()};case'specific':return{width:(bsData.slideshowWidth?bsData.slideshowWidth:$B(bsData.wrapperElement).innerWidth()),height:(bsData.slideshowHeight?bsData.slideshowHeight:$B(bsData.wrapperElement).innerHeight())};default:return{width:$B(window).width(),height:$B(window).height()};}}


/*===============================
/bt_education30/templates/bt_education/html/mod_btsocialconnect_login/js/jquery.fancybox.js
================================================================================*/;
/*!
 * fancyBox - jQuery Plugin
 * version: 2.0.6 (16/04/2012)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(window,document,$,undefined){"use strict";var W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments);},didResize=false,resizeTimer=null,isTouch=document.createTouch!==undefined,isString=function(str){return $.type(str)==="string";},isPercentage=function(str){return isString(str)&&str.indexOf('%')>0;},getValue=function(value,dim){if(dim&&isPercentage(value)){value=F.getViewport()[dim]/100*parseInt(value,10);}
return Math.round(value)+'px';};$.extend(F,{version:'2.0.5',defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoResize:!isTouch,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,fixed:false,scrolling:'auto',wrapCSS:'',arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:'html',headers:{'X-fancyBox':true}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+($.browser.msie?' allowtransparency="true"':'')+'></iframe>',swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:'fade',openSpeed:300,openEasing:'swing',openOpacity:true,openMethod:'zoomIn',closeEffect:'fade',closeSpeed:300,closeEasing:'swing',closeOpacity:true,closeMethod:'zoomOut',nextEffect:'elastic',nextSpeed:300,nextEasing:'swing',nextMethod:'changeIn',prevEffect:'elastic',prevSpeed:300,prevEasing:'swing',prevMethod:'changeOut',helpers:{overlay:{speedIn:0,speedOut:300,opacity:0.55,css:{cursor:'pointer'},closeClick:true},title:{type:'float'}},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},coming:null,current:null,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){F.close(true);if(group&&!$.isArray(group)){group=group instanceof $?$(group).get():[group];}
F.isActive=true;F.opts=$.extend(true,{},F.defaults,opts);if($.isPlainObject(opts)&&opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false;}
F.group=group;F._start(F.opts.index||0);},cancel:function(){if(F.coming&&false===F.trigger('onCancel')){return;}
F.coming=null;F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort();}
F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onabort=F.imgPreload.onerror=null;}},close:function(a){F.cancel();if(!F.current||false===F.trigger('beforeClose')){return;}
F.unbindEvents();if(!F.isOpen||(a&&a[0]===true)){$('.fancybox-wrap').stop().trigger('onReset').remove();F._afterZoomOut();}else{F.isOpen=F.isOpened=false;$('.fancybox-item, .fancybox-nav').remove();F.wrap.stop(true).removeClass('fancybox-opened');F.inner.css('overflow','hidden');F.transitions[F.current.closeMethod]();}},play:function(a){var clear=function(){clearTimeout(F.player.timer);},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed);}},stop=function(){clear();$('body').unbind('.player');F.player.isActive=false;F.trigger('onPlayEnd');},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;$('body').bind({'afterShow.player onUpdate.player':set,'onCancel.player beforeClose.player':stop,'beforeLoad.player':clear});set();F.trigger('onPlayStart');}};if(F.player.isActive||(a&&a[0]===false)){stop();}else{start();}},next:function(){if(F.current){F.jumpto(F.current.index+1);}},prev:function(){if(F.current){F.jumpto(F.current.index-1);}},jumpto:function(index){if(!F.current){return;}
index=parseInt(index,10);if(F.group.length>1&&F.current.loop){if(index>=F.group.length){index=0;}else if(index<0){index=F.group.length-1;}}
if(F.group[index]!==undefined){F.cancel();F._start(index);}},reposition:function(e,onlyAbsolute){var pos;if(F.isOpen){pos=F._getPosition(onlyAbsolute);if(e&&e.type==='scroll'){delete pos.position;F.wrap.stop(true,true).animate(pos,200);}else{F.wrap.css(pos);}}},update:function(e){if(!F.isOpen){return;}
if(!didResize){resizeTimer=setTimeout(function(){var current=F.current,anyway=!e||(e&&e.type==='orientationchange');if(didResize){didResize=false;if(!current){return;}
if((!e||e.type!=='scroll')||anyway){if(current.autoSize&&current.type!=='iframe'){F.inner.height('auto');current.height=F.inner.height();}
if(current.autoResize||anyway){F._setDimension();}
if(current.canGrow&&current.type!=='iframe'){F.inner.height('auto');}}
if(current.autoCenter||anyway){F.reposition(e);}
F.trigger('onUpdate');}},200);}
didResize=true;},toggle:function(){if(F.isOpen){F.current.fitToView=!F.current.fitToView;F.update();}},hideLoading:function(){D.unbind('keypress.fb');$('#fancybox-loading').remove();},showLoading:function(){F.hideLoading();D.bind('keypress.fb',function(e){if(e.keyCode===27){e.preventDefault();F.cancel();}});$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo('body');},getViewport:function(){return{x:W.scrollLeft(),y:W.scrollTop(),w:isTouch&&window.innerWidth?window.innerWidth:W.width(),h:isTouch&&window.innerHeight?window.innerHeight:W.height()};},unbindEvents:function(){if(F.wrap){F.wrap.unbind('.fb');}
D.unbind('.fb');W.unbind('.fb');},bindEvents:function(){var current=F.current,keys=current.keys;if(!current){return;}
W.bind('resize.fb orientationchange.fb'+(current.autoCenter&&!current.fixed?' scroll.fb':''),F.update);if(keys){D.bind('keydown.fb',function(e){var code,target=e.target||e.srcElement;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is('[contenteditable]')))){code=e.keyCode;if($.inArray(code,keys.close)>-1){F.close();e.preventDefault();}else if($.inArray(code,keys.next)>-1){F.next();e.preventDefault();}else if($.inArray(code,keys.prev)>-1){F.prev();e.preventDefault();}}});}
if($.fn.mousewheel&&current.mouseWheel&&F.group.length>1){F.wrap.bind('mousewheel.fb',function(e,delta){var target=e.target||null;if(delta!==0&&(!target||target.clientHeight===0||(target.scrollHeight===target.clientHeight&&target.scrollWidth===target.clientWidth))){e.preventDefault();F[delta>0?'prev':'next']();}});}},trigger:function(event,o){var ret,obj=o||F[$.inArray(event,['onCancel','beforeLoad','afterLoad'])>-1?'coming':'current'];if(!obj){return;}
if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1));}
if(ret===false){return false;}
if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&$.isPlainObject(F.helpers[helper])&&$.isFunction(F.helpers[helper][event])){F.helpers[helper][event](opts,obj);}});}
$.event.trigger(event+'.fb');},isImage:function(str){return isString(str)&&str.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i);},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i);},_start:function(index){var coming={},element=F.group[index]||null,isDom,href,type,rez,hrefParts;if(element&&(element.nodeType||element instanceof $)){isDom=true;if($.metadata){coming=$(element).metadata();}}
coming=$.extend(true,{},F.opts,{index:index,element:element},($.isPlainObject(element)?element:coming));$.each(['href','title','content','type'],function(i,v){coming[v]=F.opts[v]||(isDom&&$(element).attr(v))||coming[v]||null;});if(typeof coming.margin==='number'){coming.margin=[coming.margin,coming.margin,coming.margin,coming.margin];}
if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:'auto'},closeClick:false}}});}
F.coming=coming;if(false===F.trigger('beforeLoad')){F.coming=null;return;}
type=coming.type;href=coming.href||element;if(!type){if(isDom){type=$(element).data('fancybox-type');if(!type){rez=element.className.match(/fancybox\.(\w+)/);type=rez?rez[1]:null;}}
if(!type&&isString(href)){if(F.isImage(href)){type='image';}else if(F.isSWF(href)){type='swf';}else if(href.match(/^#/)){type='inline';}}
if(!type){type=isDom?'inline':'html';}
coming.type=type;}
if(type==='inline'||type==='html'){if(!coming.content){if(type==='inline'){coming.content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,''):href);}else{coming.content=element;}}
if(!coming.content||!coming.content.length){type=null;}}else if(!href){type=null;}
if(type==='ajax'&&isString(href)){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();coming.selector=hrefParts.shift();}
coming.href=href;coming.group=F.group;coming.isDom=isDom;switch(type){case'image':F._loadImage();break;case'ajax':F._loadAjax();break;case'inline':case'iframe':case'swf':case'html':F._afterLoad();break;default:F._error('type');}},_error:function(type){F.hideLoading();$.extend(F.coming,{type:'html',autoSize:true,minWidth:0,minHeight:0,padding:15,hasError:type,content:F.coming.tpl.error});F._afterLoad();},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width;F.coming.height=this.height;F._afterLoad();};img.onerror=function(){this.onload=this.onerror=null;F._error('image');};img.src=F.coming.href;if(img.complete===undefined||!img.complete){F.showLoading();}},_loadAjax:function(){F.showLoading();F.ajaxLoad=$.ajax($.extend({},F.coming.ajax,{url:F.coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=='abort'){F._error('ajax',jqXHR);}else{F.hideLoading();}},success:function(data,textStatus){if(textStatus==='success'){F.coming.content=data;F._afterLoad();}}}));},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,item,href,i,cnt=Math.min(current.preload,len-1);if(!current.preload||group.length<2){return;}
for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];href=item.href||$(item).attr('href')||item;if(item.type==='image'||F.isImage(href)){new Image().src=href;}}},_afterLoad:function(){F.hideLoading();if(!F.coming||false===F.trigger('afterLoad',F.current)){F.coming=false;return;}
if(F.isOpened){$('.fancybox-item, .fancybox-nav').remove();F.wrap.stop(true).removeClass('fancybox-opened');F.inner.css('overflow','hidden');F.transitions[F.current.prevMethod]();}else{$('.fancybox-wrap').stop().trigger('onReset').remove();F.trigger('afterClose');}
F.unbindEvents();F.isOpen=false;F.current=F.coming;F.wrap=$(F.current.tpl.wrap).addClass('fancybox-'+(isTouch?'mobile':'desktop')+' fancybox-type-'+F.current.type+' fancybox-tmp '+F.current.wrapCSS).appendTo('body');F.skin=$('.fancybox-skin',F.wrap).css('padding',getValue(F.current.padding));F.outer=$('.fancybox-outer',F.wrap);F.inner=$('.fancybox-inner',F.wrap);F._setContent();},_setContent:function(){var current=F.current,content=current.content,type=current.type,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,loadingBay;switch(type){case'inline':case'ajax':case'html':if(current.selector){content=$('<div>').html(content).find(current.selector);}else if(content instanceof $){if(content.parent().hasClass('fancybox-inner')){content.parents('.fancybox-wrap').unbind('onReset');}
content=content.show().detach();$(F.wrap).bind('onReset',function(){content.appendTo('body').hide();});}
if(current.autoSize){loadingBay=$('<div class="fancybox-wrap '+F.current.wrapCSS+' fancybox-tmp"></div>').appendTo('body').css({minWidth:getValue(minWidth,'w'),minHeight:getValue(minHeight,'h'),maxWidth:getValue(maxWidth,'w'),maxHeight:getValue(maxHeight,'h')}).append(content);current.width=loadingBay.width();current.height=loadingBay.height();loadingBay.width(F.current.width);if(loadingBay.height()>current.height){loadingBay.width(current.width+1);current.width=loadingBay.width();current.height=loadingBay.height();}
content=loadingBay.contents().detach();loadingBay.remove();}
break;case'image':content=current.tpl.image.replace('{href}',current.href);current.aspectRatio=true;break;case'swf':content=current.tpl.swf.replace(/\{width\}/g,current.width).replace(/\{height\}/g,current.height).replace(/\{href\}/g,current.href);break;case'iframe':content=$(current.tpl.iframe.replace('{rnd}',new Date().getTime())).attr('scrolling',current.scrolling).attr('src',current.href);current.scrolling=isTouch?'scroll':'auto';break;}
if(type==='image'||type==='swf'){current.autoSize=false;current.scrolling='visible';}
if(type==='iframe'&&current.autoSize){F.showLoading();F._setDimension();F.inner.css('overflow',current.scrolling);content.bind({onCancel:function(){$(this).unbind();F._afterZoomOut();},load:function(){F.hideLoading();try{if(this.contentWindow.document.location){F.current.height=$(this).contents().find('body').height();}}catch(e){F.current.autoSize=false;}
F[F.isOpen?'_afterZoomIn':'_beforeShow']();}}).appendTo(F.inner);}else{F.inner.append(content);F._beforeShow();}},_beforeShow:function(){F.coming=null;F.trigger('beforeShow');F._setDimension();F.wrap.hide().removeClass('fancybox-tmp');F.bindEvents();F._preloadImages();F.transitions[F.isOpened?F.current.nextMethod:F.current.openMethod]();},_setDimension:function(){var wrap=F.wrap,inner=F.inner,current=F.current,viewport=F.getViewport(),margin=current.margin,padding2=current.padding*2,width=current.width,height=current.height,maxWidth=current.maxWidth+padding2,maxHeight=current.maxHeight+padding2,minWidth=current.minWidth+padding2,minHeight=current.minHeight+padding2,ratio,height_;viewport.w-=(margin[1]+margin[3]);viewport.h-=(margin[0]+margin[2]);if(isPercentage(width)){width=(((viewport.w-padding2)*parseFloat(width))/100);}
if(isPercentage(height)){height=(((viewport.h-padding2)*parseFloat(height))/100);}
ratio=width/height;width+=padding2;height+=padding2;if(current.fitToView){maxWidth=Math.min(viewport.w,maxWidth);maxHeight=Math.min(viewport.h,maxHeight);}
if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=((width-padding2)/ratio)+padding2;}
if(height>maxHeight){height=maxHeight;width=((height-padding2)*ratio)+padding2;}
if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2;}
if(height<minHeight){height=minHeight;width=((height-padding2)*ratio)+padding2;}}else{width=Math.max(minWidth,Math.min(width,maxWidth));height=Math.max(minHeight,Math.min(height,maxHeight));}
width=Math.round(width);height=Math.round(height);$(wrap.add(inner)).width('auto').height('auto');inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height();if(width>maxWidth||height_>maxHeight){while((width>maxWidth||height_>maxHeight)&&width>minWidth&&height_>minHeight){height=height-10;if(current.aspectRatio){width=Math.round(((height-padding2)*ratio)+padding2);if(width<minWidth){width=minWidth;height=((width-padding2)/ratio)+padding2;}}else{width=width-10;}
inner.width(width-padding2).height(height-padding2);wrap.width(width);height_=wrap.height();}}
current.dim={width:getValue(width),height:getValue(height_)};current.canGrow=current.autoSize&&height>minHeight&&height<maxHeight;current.canShrink=false;current.canExpand=false;if((width-padding2)<current.width||(height-padding2)<current.height){current.canExpand=true;}else if((width>viewport.w||height_>viewport.h)&&width>minWidth&&height>minHeight){current.canShrink=true;}
F.innerSpace=height_-padding2-inner.height();},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:'absolute',top:margin[0]+viewport.y,left:margin[3]+viewport.x};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez={position:'fixed',top:margin[0],left:margin[3]};}
rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*0.5)));return rez;},_afterZoomIn:function(){var current=F.current,scrolling=current?current.scrolling:'no';if(!current){return;}
F.isOpen=F.isOpened=true;F.wrap.addClass('fancybox-opened');F.inner.css('overflow',scrolling==='yes'?'scroll':(scrolling==='no'?'hidden':scrolling));F.trigger('afterShow');F.update();if(current.closeClick||current.nextClick){F.inner.css('cursor','pointer').bind('click.fb',function(e){if(!$(e.target).is('a')&&!$(e.target).parent().is('a')){F[current.closeClick?'close':'next']();}});}
if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb',F.close);}
if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind('click.fb',F.prev);}
if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind('click.fb',F.next);}}
if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play();}},_afterZoomOut:function(){var current=F.current;F.wrap.trigger('onReset').remove();$.extend(F,{group:{},opts:{},current:null,isActive:false,isOpened:false,isOpen:false,wrap:null,skin:null,outer:null,inner:null});F.trigger('afterClose',current);}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,padding=current.padding,orig=$(current.orig),pos={},width=50,height=50,viewport;if(!orig.length&&current.isDom&&$(element).is(':visible')){orig=$(element).find('img:first');if(!orig.length){orig=$(element);}}
if(orig.length){pos=orig.offset();if(orig.is('img')){width=orig.outerWidth();height=orig.outerHeight();}}else{viewport=F.getViewport();pos.top=viewport.y+(viewport.h-height)*0.5;pos.left=viewport.x+(viewport.w-width)*0.5;}
pos={top:getValue(pos.top-padding),left:getValue(pos.left-padding),width:getValue(width+padding*2),height:getValue(height+padding*2)};return pos;},step:function(now,fx){var prop=fx.prop,value,ratio;if(prop==='width'||prop==='height'){value=Math.ceil(now-(F.current.padding*2));if(prop==='height'){ratio=(now-fx.start)/(fx.end-fx.start);if(fx.start>fx.end){ratio=1-ratio;}
value-=F.innerSpace*ratio;}
F.inner[prop](value);}},zoomIn:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==='elastic',dim=current.dim,startPos=$.extend({},dim,F._getPosition(elastic)),endPos=$.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0;}
F.outer.add(F.inner).width('auto').height('auto');}else if(effect==='fade'){startPos.opacity=0;}
wrap.css(startPos).show().animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn});},zoomOut:function(){var wrap=F.wrap,current=F.current,effect=current.openEffect,elastic=effect==='elastic',endPos={opacity:0};if(elastic){if(wrap.css('position')==='fixed'){wrap.css(F._getPosition(true));}
endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0;}}
wrap.animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});},changeIn:function(){var wrap=F.wrap,current=F.current,effect=current.nextEffect,elastic=effect==='elastic',startPos=F._getPosition(elastic),endPos={opacity:1};startPos.opacity=0;if(elastic){startPos.top=getValue(parseInt(startPos.top,10)-200);endPos.top='+=200px';}
wrap.css(startPos).show().animate(endPos,{duration:effect==='none'?0:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn});},changeOut:function(){var wrap=F.wrap,current=F.current,effect=current.prevEffect,endPos={opacity:0},cleanUp=function(){$(this).trigger('onReset').remove();};wrap.removeClass('fancybox-opened');if(effect==='elastic'){endPos.top='+=200px';}
wrap.animate(endPos,{duration:effect==='none'?0:current.prevSpeed,easing:current.prevEasing,complete:cleanUp});}};F.helpers.overlay={overlay:null,update:function(){var width,scrollWidth,offsetWidth;this.overlay.width('100%').height('100%');if($.browser.msie||isTouch){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);width=scrollWidth<offsetWidth?W.width():scrollWidth;}else{width=D.width();}
this.overlay.width(width).height(D.height());},beforeShow:function(opts){if(this.overlay){return;}
opts=$.extend(true,{},F.defaults.helpers.overlay,opts);this.overlay=$('<div id="fancybox-overlay"></div>').css(opts.css).appendTo('body');if(opts.closeClick){this.overlay.bind('click.fb',F.close);}
if(F.current.fixed&&!isTouch){this.overlay.addClass('overlay-fixed');}else{this.update();this.onUpdate=function(){this.update();};}
this.overlay.fadeTo(opts.speedIn,opts.opacity);},afterClose:function(opts){if(this.overlay){this.overlay.fadeOut(opts.speedOut||0,function(){$(this).remove();});}
this.overlay=null;}};F.helpers.title={beforeShow:function(opts){var title,text=F.current.title;if(text){title=$('<div class="fancybox-title fancybox-title-'+opts.type+'-wrap">'+text+'</div>').appendTo('body');if(opts.type==='float'){title.width(title.width());title.wrapInner('<span class="child"></span>');F.current.margin[2]+=Math.abs(parseInt(title.css('margin-bottom'),10));}
title.appendTo(opts.type==='over'?F.inner:(opts.type==='outside'?F.wrap:F.skin));}}};$.fn.fancybox=function(options){var that=$(this),selector=this.selector||'',index,run=function(e){var what=this,idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!$(what).is('.fancybox-wrap')){e.preventDefault();relType=options.groupAttr||'data-fancybox-group';relVal=$(what).attr(relType);if(!relVal){relType='rel';relVal=what[relType];}
if(relVal&&relVal!==''&&relVal!=='nofollow'){what=selector.length?$(selector):that;what=what.filter('['+relType+'="'+relVal+'"]');idx=what.index(this);}
options.index=idx;F.open(what,options);}};options=options||{};index=options.index||0;if(selector){D.undelegate(selector,'click.fb-start').delegate(selector,'click.fb-start',run);}else{that.unbind('click.fb-start').bind('click.fb-start',run);}
return this;};$(document).ready(function(){F.defaults.fixed=$.support.fixedPosition||(!($.browser.msie&&$.browser.version<=6)&&!isTouch);});}(window,document,jQuery));


/*===============================
/bt_education30/templates/bt_education/html/mod_btsocialconnect_login/js/script.js
================================================================================*/;
function newPopup(pageURL,title,w,h){var left=(screen.width/2)-(w/2);var top=(screen.height/2)-(h/2);var popupWindow=window.open(pageURL,'connectingPopup','height='+h+',width='+w+',left='+left+',top='+top+',resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes');}


/*===============================
/bt_education30/media/system/js/punycode.js
================================================================================*/;
/*! http://mths.be/punycode v1.2.4 (C) by @mathias | MIT License*/
!function(a){function b(a){throw RangeError(E[a])}function c(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function d(a,b){return c(a.split(D),b).join(".")}function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){return c(a,function(a){var b="";return a>65535&&(a-=65536,b+=H(a>>>10&1023|55296),a=56320|1023&a),b+=H(a)}).join("")}function g(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:t}function h(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function i(a,b,c){var d=0;for(a=c?G(a/x):a>>1,a+=G(a/b);a>F*v>>1;d+=t)a=G(a/F);return G(d+(F+1)*a/(a+w))}function j(a){var c,d,e,h,j,k,l,m,n,o,p=[],q=a.length,r=0,w=z,x=y;for(d=a.lastIndexOf(A),0>d&&(d=0),e=0;d>e;++e)a.charCodeAt(e)>=128&&b("not-basic"),p.push(a.charCodeAt(e));for(h=d>0?d+1:0;q>h;){for(j=r,k=1,l=t;h>=q&&b("invalid-input"),m=g(a.charCodeAt(h++)),(m>=t||m>G((s-r)/k))&&b("overflow"),r+=m*k,n=x>=l?u:l>=x+v?v:l-x,!(n>m);l+=t)o=t-n,k>G(s/o)&&b("overflow"),k*=o;c=p.length+1,x=i(r-j,c,0==j),G(r/c)>s-w&&b("overflow"),w+=G(r/c),r%=c,p.splice(r++,0,w)}return f(p)}function k(a){var c,d,f,g,j,k,l,m,n,o,p,q,r,w,x,B=[];for(a=e(a),q=a.length,c=z,d=0,j=y,k=0;q>k;++k)p=a[k],128>p&&B.push(H(p));for(f=g=B.length,g&&B.push(A);q>f;){for(l=s,k=0;q>k;++k)p=a[k],p>=c&&l>p&&(l=p);for(r=f+1,l-c>G((s-d)/r)&&b("overflow"),d+=(l-c)*r,c=l,k=0;q>k;++k)if(p=a[k],c>p&&++d>s&&b("overflow"),p==c){for(m=d,n=t;o=j>=n?u:n>=j+v?v:n-j,!(o>m);n+=t)x=m-o,w=t-o,B.push(H(h(o+x%w,0))),m=G(x/w);B.push(H(h(m,0))),j=i(d,r,f==g),d=0,++f}++d,++c}return B.join("")}function l(a){return d(a,function(a){return B.test(a)?j(a.slice(4).toLowerCase()):a})}function m(a){return d(a,function(a){return C.test(a)?"xn--"+k(a):a})}var n="object"==typeof exports&&exports,o="object"==typeof module&&module&&module.exports==n&&module,p="object"==typeof global&&global;(p.global===p||p.window===p)&&(a=p);var q,r,s=2147483647,t=36,u=1,v=26,w=38,x=700,y=72,z=128,A="-",B=/^xn--/,C=/[^ -~]/,D=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=t-u,G=Math.floor,H=String.fromCharCode;if(q={version:"1.2.4",ucs2:{decode:e,encode:f},decode:j,encode:k,toASCII:m,toUnicode:l},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return q});else if(n&&!n.nodeType)if(o)o.exports=q;else for(r in q)q.hasOwnProperty(r)&&(n[r]=q[r]);else a.punycode=q}(this);


/*===============================
/bt_education30/media/system/js/validate.js
================================================================================*/;
var JFormValidator=function(){var $,handlers,inputEmail,custom,setHandler=function(name,fn,en){en=en===""?true:en;handlers[name]={enabled:en,exec:fn}},findLabel=function(id,form){var $label,$form=jQuery(form);if(!id){return false}$label=$form.find("#"+id+"-lbl");if($label.length){return $label}$label=$form.find('label[for="'+id+'"]');if($label.length){return $label}return false},handleResponse=function(state,$el){var $label=$el.data("label");if(state===false){$el.addClass("invalid").attr("aria-invalid","true");if($label){$label.addClass("invalid").attr("aria-invalid","true")}}else{$el.removeClass("invalid").attr("aria-invalid","false");if($label){$label.removeClass("invalid").attr("aria-invalid","false")}}},validate=function(el){var $el=jQuery(el),tagName,handler;if($el.attr("disabled")){handleResponse(true,$el);return true}if($el.attr("required")||$el.hasClass("required")){tagName=$el.prop("tagName").toLowerCase();if(tagName==="fieldset"&&($el.hasClass("radio")||$el.hasClass("checkboxes"))){if(!$el.find("input:checked").length){handleResponse(false,$el);return false}}else if(!$el.val()||$el.hasClass("placeholder")||$el.attr("type")==="checkbox"&&!$el.is(":checked")){handleResponse(false,$el);return false}}handler=$el.attr("class")&&$el.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?$el.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(handler===""){handleResponse(true,$el);return true}if(handler&&handler!=="none"&&handlers[handler]&&$el.val()){if(handlers[handler].exec($el.val())!==true){handleResponse(false,$el);return false}}handleResponse(true,$el);return true},isValid=function(form){var valid=true,i,message,errors,error,label;jQuery.each(jQuery(form).find("input, textarea, select, fieldset, button"),function(index,el){if(validate(el)===false){valid=false}});jQuery.each(custom,function(key,validator){if(validator.exec()!==true){valid=false}});if(!valid){message=Joomla.JText._("JLIB_FORM_FIELD_INVALID");errors=jQuery("input.invalid, textarea.invalid, select.invalid, fieldset.invalid, button.invalid");error={};error.error=[];for(i=0;i<errors.length;i++){label=jQuery("label[for="+errors[i].id+"]").text();if(label!=="undefined"){error.error[i]=message+label.replace("*","")}}Joomla.renderMessages(error)}return valid},attachToForm=function(form){var inputFields=[];jQuery(form).find("input, textarea, select, fieldset, button").each(function(){var $el=$(this),id=$el.attr("id"),tagName=$el.prop("tagName").toLowerCase();if($el.hasClass("required")){$el.attr("aria-required","true").attr("required","required")}if((tagName==="input"||tagName==="button")&&$el.attr("type")==="submit"){if($el.hasClass("validate")){$el.on("click",function(){return isValid(form)})}}else{if(tagName!=="fieldset"){$el.on("blur",function(){return validate(this)});if($el.hasClass("validate-email")&&inputEmail){$el.get(0).type="email"}}$el.data("label",findLabel(id,form));inputFields.push($el)}});$(form).data("inputfields",inputFields)},initialize=function(){$=jQuery.noConflict();handlers={};custom=custom||{};inputEmail=function(){var input=document.createElement("input");input.setAttribute("type","email");return input.type!=="text"}();setHandler("username",function(value){regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!regex.test(value)});setHandler("password",function(value){regex=/^\S[\S ]{2,98}\S$/;return regex.test(value)});setHandler("numeric",function(value){regex=/^(\d|-)?(\d|,)*\.?\d*$/;return regex.test(value)});setHandler("email",function(value){value=punycode.toASCII(value);regex=/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return regex.test(value)});jQuery("form.form-validate").each(function(){attachToForm(this)})};initialize();return{isValid:isValid,validate:validate,setHandler:setHandler,attachToForm:attachToForm,custom:custom}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator});


/*===============================
/bt_education30/templates/bt_education/html/mod_btsocialconnect_login/js/default.js
================================================================================*/;
jQuery.noConflict();if(typeof(BTLJ)=='undefined')var BTLJ=jQuery;if(typeof(btTimeOut)=='undefined')var btTimeOut;if(typeof(btlOpt)=='undefined')var btlOpt='';if(typeof(requireRemove)=='undefined')var requireRemove=true;var autoPos=true;BTLJ(document).ready(function(){BTLJ('#btl-content').appendTo('body');BTLJ(".btl-input #jform_profile_aboutme").attr("cols",21);BTLJ('.bt-scroll .btl-buttonsubmit').click(function(){setTimeout(function(){if(BTLJ("#btl-registration-error").is(':visible')){BTLJ('.bt-scroll').data('jsp').scrollToY(0,true);}else{var position=BTLJ('.bt-scroll').find('.invalid:first').position();if(position)BTLJ('.bt-scroll').data('jsp').scrollToY(position.top-15,true);}},20);})
jQuery('#btl-content-registration .bt-scroll').css({'max-width':btlOpt.RB_SIZE+'px','max-height':'100%'});if(BTLJ('.btl-dropdown').length){setFPosition();BTLJ(window).resize(function(){setFPosition();})}
BTLJ(btlOpt.LOGIN_TAGS).addClass("btl-modal");if(btlOpt.REGISTER_TAGS!=''){BTLJ(btlOpt.REGISTER_TAGS).addClass("btl-modal");}
var elements='#btl-panel-login';if(btlOpt.LOGIN_TAGS)elements+=', '+btlOpt.LOGIN_TAGS;if(btlOpt.MOUSE_EVENT=='click'){BTLJ(elements).click(function(event){showLoginForm();event.preventDefault();});}else{BTLJ(elements).hover(function(){BTLJ(this).trigger('click',showLoginForm());},function(){});}
elements='#btl-panel-registration';if(btlOpt.REGISTER_TAGS)elements+=', '+btlOpt.REGISTER_TAGS;if(btlOpt.MOUSE_EVENT=='click'){BTLJ(elements).click(function(event){showRegistrationForm();event.preventDefault();});BTLJ("#btl-panel-profile").click(function(event){showProfile();event.preventDefault();});}else{BTLJ(elements).hover(function(){if(!BTLJ("#btl-integrated").length){BTLJ(this).trigger('click',showRegistrationForm());}},function(){});BTLJ("#btl-panel-profile").hover(function(){showProfile();},function(){});}
BTLJ('#register-link a').click(function(event){if(BTLJ('.btl-modal').length){BTLJ.fancybox.close();setTimeout("showRegistrationForm();",1000);}
else{showRegistrationForm();}
event.preventDefault();});BTLJ(document).click(function(event){if(requireRemove&&event.which==1)btTimeOut=setTimeout('BTLJ("#btl-content > div").slideUp();BTLJ(".btl-panel span").removeClass("active");',10);requireRemove=true;})
BTLJ(".btl-content-block").click(function(){requireRemove=false;});BTLJ(".btl-panel span").click(function(){requireRemove=false;});BTLJ('#btl-iframe').load(function(){oldAction=BTLJ('#btl-iframe').contents().find('form').attr("action");if(oldAction!=null){if(oldAction.search("tmpl=component")==-1){if(BTLJ('#btl-iframe').contents().find('form').attr("action").indexOf('?')!=-1){BTLJ('#btl-iframe').contents().find('form').attr("action",oldAction+"&tmpl=component");}
else{BTLJ('#btl-iframe').contents().find('form').attr("action",oldAction+"?tmpl=component");}}}});BTLJ('.social_btlogin').find('img').bind({mouseenter:function(){BTLJ(this).addClass('buttonhover');},mouseleave:function(){BTLJ(this).removeClass('buttonhover');}});});function setFPosition(){if(btlOpt.ALIGN=="center"){BTLJ("#btl-content > div").each(function(){var panelid="#"+this.id.replace("content","panel");var left='';if(typeof(BTLJ(panelid).offset())!='undefined'){var left=BTLJ(panelid).offset().left-BTLJ(this).width();}
if(left<0)left=0;BTLJ(this).css('left',left);});}else{if(btlOpt.ALIGN=="right"){BTLJ("#btl-content > div").css('right',BTLJ(document).width()-BTLJ('.btl-panel').offset().left-BTLJ('.btl-panel').width());}else{BTLJ("#btl-content > div").css('left',BTLJ('.btl-panel').offset().left);}}
BTLJ("#btl-content > div").css('top',BTLJ(".btl-panel").offset().top+BTLJ(".btl-panel").height()+2);}
function showLoginForm(){BTLJ('.btl-panel span').removeClass("active");var el='#btl-panel-login';BTLJ.fancybox.close();if(BTLJ(el).hasClass("btl-modal")){BTLJ(el).addClass("active");BTLJ("#btl-content > div").fadeOut();BTLJ(el).fancybox({padding:0,maxWidth:btlOpt.LB_SIZE,maxHeight:'100%',openEffect:'fade',closeEffect:'fade',openSpeed:'slow',autoResize:true,autoCenter:true,closeBtn:true,overlayShow:true,scrolling:'auto',afterShow:function(){},beforeShow:function(){}});}
else
{BTLJ("#btl-content > div").each(function(){if(this.id=="btl-content-login")
{if(BTLJ(this).is(":hidden")){BTLJ(el).addClass("active");BTLJ(this).slideDown();}
else{BTLJ(this).fadeOut();BTLJ(el).removeClass("active");}}
else{if(BTLJ(this).is(":visible")){BTLJ(this).fadeOut();BTLJ('#btl-panel-registration').removeClass("active");}}})}}
BTLJ(window).resize(function(){var widthWindow=window.innerWidth;if(widthWindow<=480){BTLJ(".bt-scroll").addClass("moblile");}else{BTLJ(".bt-scroll").removeClass("moblile");}});function showRegistrationForm(){if(BTLJ("#btl-integrated").length){window.location.href=BTLJ("#btl-integrated").val();return;}
BTLJ('.btl-panel span').removeClass("active");BTLJ.fancybox.close();var el='#btl-panel-registration';var containerWidth=0;var containerHeight=0;var widthWindow=window.innerWidth;if(widthWindow<=480){BTLJ(".bt-scroll").addClass("moblile");}else{BTLJ(".bt-scroll").removeClass("moblile");}
if(BTLJ(el).hasClass("btl-modal")){BTLJ('.calendar').each(function(){BTLJ(this).click(function(){BTLJ("div.calendar:last").show().css({'position':'absolute','z-index':9999});BTLJ(".calendar").click(function(){requireRemove=false;});});});BTLJ('.input-append .btn').each(function(){BTLJ(this).click(function(){BTLJ("div.calendar:last").show().css({'position':'fixed','z-index':9999});});});BTLJ(el).addClass("active");BTLJ("#btl-content > div").slideUp();BTLJ(el).fancybox({padding:0,maxWidth:btlOpt.RB_SIZE,maxHeight:'100%',openEffect:'fade',closeEffect:'fade',openSpeed:'slow',autoResize:true,autoCenter:true,closeBtn:true,scrolling:'auto',overlayShow:true,afterShow:function(){},beforeShow:function(){}});}
else
{BTLJ('.calendar').each(function(){BTLJ(this).click(function(){BTLJ("div.calendar:last").show().css({'position':'absolute','z-index':9999});BTLJ(".calendar").click(function(){requireRemove=false;});});});BTLJ("#btl-content > div").each(function(){if(this.id=="btl-content-registration")
{if(BTLJ(this).is(":hidden")){BTLJ(el).addClass("active");BTLJ(this).slideDown();}
else{BTLJ(this).slideUp();BTLJ(el).removeClass("active");}}
else{if(BTLJ(this).is(":visible")){BTLJ(this).slideUp();BTLJ('#btl-panel-login').removeClass("active");}}})}}
function showProfile(){var el='#btl-panel-profile';BTLJ("#btl-content > div").each(function(){if(this.id=="btl-content-profile")
{if(BTLJ(this).is(":hidden")){BTLJ(el).addClass("active");BTLJ(this).slideDown();}
else{BTLJ(this).slideUp();BTLJ('.btl-panel span').removeClass("active");}}
else{if(BTLJ(this).is(":visible")){BTLJ(this).slideUp();BTLJ('.btl-panel span').removeClass("active");}}})}
function registerAjax(){BTLJ("#btl-formregistration").submit(function(){BTLJ.ajax({type:"POST",beforeSend:function(){BTLJ("#btl-register-in-process").show();},url:btlOpt.BT_AJAX,data:BTLJ(this),success:function(){BTLJ(".btl-formregistration").children("div").hide();BTLJ("#btl-success").html(html);BTLJ("#btl-success").show();setTimeout(function(){window.location.reload();},7000);}});});}
function loginAjax(){if(BTLJ("#btl-input-username").val()==""){showLoginError(Joomla.JText._('REQUIRED_USERNAME'));return false;}
if(BTLJ("#btl-input-password").val()==""){showLoginError(Joomla.JText._('REQUIRED_PASSWORD'));return false;}
var token=BTLJ('.btl-buttonsubmit input:last').attr("name");var value_token=encodeURIComponent(BTLJ('.btl-buttonsubmit input:last').val());var datasubmit="bttask=login&username="+encodeURIComponent(BTLJ("#btl-input-username").val())
+"&passwd="+encodeURIComponent(BTLJ("#btl-input-password").val())
+"&"+token+"="+value_token
+"&return="+encodeURIComponent(BTLJ("#btl-return").val());if(BTLJ("#btl-checkbox-remember").is(":checked")){datasubmit+='&remember=yes';}
BTLJ.ajax({type:"POST",beforeSend:function(){BTLJ("#btl-login-in-process").show();BTLJ("#btl-login-in-process").css('height',BTLJ('#btl-content-login').outerHeight()+'px');},url:btlOpt.BT_AJAX,data:datasubmit,success:function(html,textstatus,xhrReq){if(html=="1"||html==1){window.location.href=btlOpt.BT_RETURN;}else{if(html.indexOf('</head>')==-1){showLoginError(Joomla.JText._('E_LOGIN_AUTHENTICATE'));}
else
{if(html.indexOf('btl-panel-profile')==-1){showLoginError('Another plugin has redirected the page on login, Please check your plugins system');}
else
{window.location.href=btlOpt.BT_RETURN;}}}},error:function(XMLHttpRequest,textStatus,errorThrown){alert(textStatus+': Ajax request failed!');}});return false;}
function showLoginError(notice,reload){BTLJ("#btl-login-in-process").hide();BTLJ("#btl-login-error").html(notice);BTLJ("#btl-login-error").show();if(reload){setTimeout(function(){window.location.reload();},5000);}}