<?php/** * @package 	bt_socialconnect - BT Social Connect Component * @version		1.0.0 * @created		February 2014 * @author		BowThemes * @email		support@bowthems.com * @website		http://bowthemes.com * @support		Forum - http://bowthemes.com/forum/ * @copyright	Copyright (C) 2014 Bowthemes. All rights reserved. * @license		http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL */defined('_JEXEC') or die;jimport('joomla.application.component.modellist');require_once JPATH_COMPONENT_ADMINISTRATOR.'/helpers/helper.php';class Bt_SocialconnectModelStatistics extends JModelList{	protected $text_prefix = 'COM_BT_SOCIALCONNECT';			/* Get all user number  */	public function getNumberuser()	{		$db = $this->getDbo();		$db->setQuery('Select COUNT(id)  from #__users ');		return $db->loadresult();				}		/* Get user number connect to social network */		public function getStatistic($item=null){				$db = JFactory::getDBO();		$db->setQuery('Select DISTINCT  COUNT(user_id)  from #__bt_connections WHERE social_type ="'.$item.'"');				return $db->loadresult();	}	// Get message posted	public function getPostmessage($item){				$db = JFactory::getDBO();		$socialname = $db->Quote('%'.$item.'%');		$db->setQuery('Select  COUNT(id)  from #__bt_messages WHERE type LIKE '.$socialname);			$numb =$db->loadresult();		return $numb;					}		// Get message error	public function getMesageerror(){		$db = JFactory::getDBO();		$db->setQuery('Select  COUNT(id)  from #__bt_messages WHERE published =0');				return $db->loadresult();	}	// Get number of social (widget, publish)  used		public function getNumberSocial($folder){		$directory = 'components/com_bt_socialconnect/'.$folder.'/';				$files = glob($directory."*");					$dir = array();		foreach($files as $file)		{					 if(is_dir($file))			 {				$tmp = new stdClass();				$tmp->wgname = str_replace('components/com_bt_socialconnect/'.$folder.'/', '', $file);				$dir[] = $tmp;	  			 }		 }				return count($dir);	}		public function getCountclick($social){		$db = JFactory::getDbo();		$socialname = $db->Quote('%'.$social.'%');				$query='SELECT  SUM(m.event) FROM  #__bt_messages  AS m WHERE m.type LIKE '.$socialname;				$db->setQuery($query);		$db->query();		return $db->loadResult();	}}